<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>pink space debug</title>
  <style>
    html, body { height: 100%; margin: 0; }
    body { background:#ff00ff; overflow:hidden; user-select:none; }
    #trigger { position:fixed; top:14px; left:14px; font-size:14px; cursor:pointer; color:rgba(0,0,0,.85); opacity:.8; }
    #log { position:fixed; bottom:10px; left:10px; right:10px; font:12px/1.4 ui-monospace, SFMono-Regular, Menlo, monospace;
           background:rgba(255,255,255,.25); border:1px solid rgba(0,0,0,.6); padding:8px 10px; border-radius:10px; }
  </style>
</head>
<body>
  <div id="trigger">▶︎</div>
  <div id="log">loading…</div>

  <audio id="audio" src="audio.mp3" loop playsinline preload="auto"></audio>

  <script>
    const t = document.getElementById("trigger");
    const a = document.getElementById("audio");
    const log = (m) => (document.getElementById("log").textContent = m);

    // よくあるイベントを全部表示
    ["loadstart","loadedmetadata","canplay","canplaythrough","error","stalled","waiting","play","playing","pause"].forEach(ev => {
      a.addEventListener(ev, () => {
        const err = a.error ? ` | error=${a.error.code}` : "";
        log(`${ev} | src=${a.currentSrc || a.src} | readyState=${a.readyState}${err}`);
      });
    });

    t.addEventListener("click", async () => {
      try {
        log("click ▶︎ : trying play()");
        await a.play();
        log("play() success ✅");
      } catch (e) {
        log("play() blocked ❌ : " + (e?.name || e));
        console.warn(e);
      }
    });

    // 音量ミュート系の事故を潰す
    a.muted = false;
    a.volume = 1.0;
  </script>
</body>
</html>


